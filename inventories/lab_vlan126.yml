all:
  hosts:
  vars:
    lab_name: lab_vlan126
    lab_prefix: "{{ lab_name }}_"
    lab_password: P@ssw0rd
    lab_vm_datastore: lab_vlan126
    lab_wan_portgroup: "VM Network"
    lab_lan1_portgroup: "VLAN126"
    lab_lan1_netmask_cidr: "24"
    lab_lan1_netmask: "255.255.255.0"
    lab_lan1_gateway: "192.168.126.1"
    lab_lan1_dns_ip: "192.168.126.11"
    lab_lan2_portgroup: "lab_vlan126_net2"
    lab_domain_name: "lab126.madlabber.com"
    # lab_domain_controller: "dc01"
  children:
    dc:
      hosts:
        dc01:
          version: "Server2022eval"
          ip_address: 192.168.126.11
          extra_files_urls:
            - https://dl.google.com/chrome/install/googlechromestandaloneenterprise64.msi
            - http://the.earth.li/~sgtatham/putty/0.83/w64/putty-64bit-0.83-installer.msi
          extra_commands:
            - MsiExec.exe /i E:\files\putty-64bit-0.83-installer.msi /qn
            - MsiExec.exe /i E:\files\googlechromestandaloneenterprise64.msi /qn
    winservers:
      hosts:
        server2022:
          ip_address: 192.168.126.12
          version: "Server2022eval"
          vm_memory_mb: 4096
          vm_num_cpus: 2
          vm_disk_gb: 40
          extra_commands:
            # Install Chrome
            - "Invoke-WebRequest -Uri http://dl.google.com/chrome/install/375.126/chrome_installer.exe -OutFile C:\\Windows\\temp\\chrome_installer.exe"
            - "C:\\Windows\\temp\\chrome_installer.exe /silent /install"
            # Install Putty
            - "Invoke-WebRequest -Uri http://the.earth.li/~sgtatham/putty/0.73/w64/putty-64bit-0.73-installer.msi -OutFile C:\\Windows\\temp\\putty-64bit-installer.msi"
            - "MsiExec.exe /i C:\\Windows\\temp\\putty-64bit-installer.msi /qn"
    centos:
      vars:
      hosts:
        ansible:
          state: force
          ip_address: 192.168.126.15
          distro: "rocky"
          version: "9.4"
          vm_memory_mb: 4096
          vm_num_cpus: 2
          vm_disk_gb: 120
          install_xrdp: true
          install_ansible: true
          nested_virtualization: false
          include_files:
            # - files/9171RC1_v_image.tgz
        aiqum1:
          state: force
          ip_address: 192.168.126.27
          distro: "rocky"
          version: "9.4"
          vm_memory_mb: 16384
          vm_num_cpus: 4
          vm_disk_gb: 200
          install_xrdp: true
          install_ansible: false
          nested_virtualization: false
          extra_files:
            - files/ActiveIQUnifiedManager-9.16P2-el8.zip
          extra_commands:
            # copy the install from the cdrom
            - "mkdir /mnt/cdrom"
            - "mount /dev/sr1 /mnt/cdrom"
            - "cp /mnt/cdrom/files/* /home/admin/"
            - "umount /mnt/cdrom"
            - "rm -rf /mnt/cdrom"
            - unzip /home/admin/ActiveIQUnifiedManager-*.zip -d /home/admin
            - "dnf install -y epel-release"
            - wget  http://repo.mysql.com/yum/mysql-8.4-community/el/8/x86_64/mysql84-community-release-el8-1.noarch.rpm
            - "dnf install -y mysql84-community-release-el8-1.noarch.rpm"
            - "dnf install -y /home/admin/*.rpm"
            - "firewall-cmd --permanent --add-port=443/tcp"
            - "firewall-cmd --reload"


    vsims:
      hosts:
        # demo1-01:  
        #   partner:      "demo1-02"
        #   cluster_name: "demo1"          
        #   ovf_version:  "9.9.1"   
        #   cluster_mgmt_ip: 192.168.126.90                  
        #   ip_address:      192.168.126.91
        #   partner_ip:      192.168.126.92
        #   disk_model: "vscsi"
        #   shelf0_disk_size: 12288
        #   shelf0_disk_count: 6
        #   shelf1_disk_size: 12288
        #   shelf1_disk_count: 6
        #   fake_ssd_disk_size: 12288
        #   adp_enabled: "true"
        #   adpv2_enabled: "true"
        #   serial_ports: true
        #   partner_serial_ports: true

        # demo2-01:  
        #   partner:      "demo2-02"
        #   cluster_name: "demo2"          
        #   ovf_version:  "9.9.1"   
        #   cluster_mgmt_ip: 192.168.126.80                  
        #   ip_address:      192.168.126.81
        #   partner_ip:      192.168.126.82
        #   disk_model: "vscsi"
        #   shelf0_disk_size: 12288
        #   shelf0_disk_count: 6
        #   shelf1_disk_size: 12288
        #   shelf1_disk_count: 6
        #   fake_ssd_disk_size: 12288
        #   adp_enabled: "true"
        #   adpv2_enabled: "true"
        #   serial_ports: true
        #   partner_serial_ports: true

          # bootargs:
          # - "testarg=true"
          # - "testarg2=true"
        vsim9171:
          state: force
          ovf_version: "9.16.1"
          update_package: files/9171_q_image.tgz
          ip_address:    192.168.126.151
          cluster_name:    "demo"
          cluster_mgmt_ip: 192.168.126.150
          sys_serial_number: "408236-85-07"
          disk_model: "vscsi"
          shelf0_disk_size: 8192
          shelf0_disk_count: 12
          # shelf1_disk_size: 1024
          # shelf1_disk_count: 9
          # shelf2_disk_size: 1096
          # shelf2_disk_count: 9
          # shelf3_disk_size: 1096
          # shelf3_disk_count: 9
          fake_ssd_disk_size: 8192
          # add_nodes_by_serial: "408236-85-08"
          # bootargs:
          #   - bootarg.vm.madlabber=true
          # extra_commands:
          #   - sleep 180 # give nodes time to join
          #   - node run vha-01 disk assign all
          #   - node run vha-02 disk assign all
          #   - storage aggregate create -aggregate aggr1 -diskcount 8 -node vha-01
          #   - storage aggregate create -aggregate aggr2 -diskcount 8 -node vha-02

        vsim9161-01:  
          state: force
          ovf_version: "9.16.1"           
          ip_address:    192.168.126.121
          cluster_name:    "vsim9161"
          cluster_mgmt_ip: 192.168.126.120
          sys_serial_number: "408236-85-07"
          add_nodes_by_serial: "408236-85-08" #,408236-85-09,408236-85-10"
        vsim9161-02:  
          state: force
          ovf_version: "9.16.1"           
          ip_address:    192.168.126.122
          sys_serial_number: "408236-85-08"
        # vha-01:  
        #   ovf_version: "9.6"           
        #   ip_address:    192.168.0.141
        #   cluster_name:    "demo2"
        #   cluster_mgmt_ip: 192.168.0.140
        #   sys_serial_number: "408236-85-07"
        #   add_nodes_by_serial: "408236-85-08,408236-85-09,408236-85-10"
        # vha-02:  
        #   ovf_version: "9.6"           
        #   ip_address:    192.168.0.142
        #   sys_serial_number: "408236-85-08"
        # vha-03:  
        #   ovf_version: "9.9.1"           
        #   ip_address:    192.168.0.143
        #   sys_serial_number: "408236-85-09"
        # vha-04:  
        #   ovf_version: "9.9.1"           
        #   ip_address:    192.168.0.144    
        #   sys_serial_number: "408236-85-10"

    ontapselecteval:
      hosts:
        lab126ots60:  
          state: force
          ontap_version: "9.15.1"           
          ontap_node_mgmt_ip:    192.168.126.61
          ontap_cluster_name:    "lab126ots60"
          ontap_cluster_mgmt_ip: 192.168.126.60
          vm_data_disk_gb:       200

    proxmox:
      vars:
        pve_version: "8.4-1"
        vm_memory_mb: 16384
        vm_num_cpus: 2
        vm_disk_gb: 250 
      hosts:
        pve01:
          state: force
          ip_address: 192.168.126.51
        pve02:
          state: force
          ip_address: 192.168.126.52

    ubuntu:
      vars:
        vm_memory_mb: 4096
        vm_num_cpus: 2
        vm_disk_gb: 40 
        install_xrdp: true
        install_ansible: true
      hosts:
        ubuntu1:
          state: force
          ip_address: 192.168.126.201
          version: "20.04"
        ubuntu2204:
          state: force
          ip_address: 192.168.126.202
          version: "22.04"
        ubuntu2404:
          state: force
          ip_address: 192.168.126.203
          version: "24.04"
        ubuntud2404:
          state: force
          ip_address: 192.168.126.204
          edition: desktop
          version: "24.04"

    nestedesx:
      hosts:
        esx41:
          ip_address: 192.168.126.41
        # esx02:
        #   ip_address: 192.168.0.42
        # esx03:
        #   ip_address: 192.168.0.43
        # esx04:
        #   ip_address: 192.168.0.44
      vars:
          esx_version: "8.0u3"
          vm_memory_mb: 10240
          vm_num_cpus: 2
          vm_disk1_size_gb: 4
          vm_disk2_size_gb: 40
          create_local_vmfs: 'False'
          enable_ssh: 'True'

    aiqum:
      hosts:
        aiqum:
          state: force
          linux_version: "8.10"
          ip_address: 192.168.126.28
          install_file: files/ActiveIQUnifiedManager-9.16P2-el8.zip